
import com.sun.glass.events.KeyEvent;
import java.awt.HeadlessException;
import javax.swing.JOptionPane;
import java.sql.*;
/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author TWS
 */
public class EditMH extends javax.swing.JFrame {
                public  void  editClear6(){
                        editJMSI.setText(null);
                        editJMHPH.setText(null);
                        editJMHRE.setSelectedItem(null);
                        editJMHRRZ.setText(null);
                        editJMHWI.setSelectedItem(null);
                        editJMHMI.setSelectedItem(null);
                        editJMHHC.setSelectedItem(null);
                        editJMHDN.setText(null);
                        editJMHDMN.setText(null);
                        editJMHHD.setText(null); 
                    
                }
    /**
     * Creates new form EditMH
     */
    public EditMH() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jButton4 = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();
        jLabel6 = new javax.swing.JLabel();
        jButton6 = new javax.swing.JButton();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        editJMSI = new javax.swing.JTextField();
        editJMHPH = new javax.swing.JTextField();
        editJMHRE = new javax.swing.JComboBox();
        JMHRR = new javax.swing.JScrollPane();
        editJMHRRZ = new javax.swing.JTextArea();
        editJMHHC = new javax.swing.JComboBox();
        editJMHWI = new javax.swing.JComboBox();
        editJMHMI = new javax.swing.JComboBox();
        editJMHDN = new javax.swing.JTextField();
        editJMHDMN = new javax.swing.JTextField();
        jScrollPane3 = new javax.swing.JScrollPane();
        editJMHHD = new javax.swing.JTextArea();
        MHL = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        editSaveMH = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        editClearMH = new javax.swing.JButton();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Edit Medical history");
        setResizable(false);

        jButton4.setText("back");
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });

        jButton5.setText("exit");
        jButton5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton5ActionPerformed(evt);
            }
        });

        jLabel6.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel6.setText("Name of your Doctor");

        jButton6.setText("home");
        jButton6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton6ActionPerformed(evt);
            }
        });

        jLabel7.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel7.setText("Have you ever had work related injuries / illness");

        jLabel8.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel8.setText("Have you ever received treatment / counseling for psychiatric or emotional illness");

        jLabel9.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel9.setText("Are you in sound health to carry out your duties?");

        jLabel10.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel10.setText("Mobile no");

        jLabel11.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel11.setText("Address of your hospital");

        editJMHRE.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        editJMHRE.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Yes", "No" }));

        editJMHRRZ.setColumns(20);
        editJMHRRZ.setRows(5);
        JMHRR.setViewportView(editJMHRRZ);

        editJMHHC.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        editJMHHC.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Yes", "No" }));
        editJMHHC.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editJMHHCActionPerformed(evt);
            }
        });

        editJMHWI.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Yes", "No" }));

        editJMHMI.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        editJMHMI.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Yes", "No" }));
        editJMHMI.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editJMHMIActionPerformed(evt);
            }
        });

        editJMHDMN.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                editJMHDMNKeyTyped(evt);
            }
        });

        editJMHHD.setColumns(20);
        editJMHHD.setRows(5);
        jScrollPane3.setViewportView(editJMHHD);

        MHL.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
        MHL.setText("EDIT MEDICAL HISTORY");

        jLabel2.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel2.setText("Staff ID");

        editSaveMH.setText("save");
        editSaveMH.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editSaveMHActionPerformed(evt);
            }
        });

        jLabel3.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel3.setText("What is your present state of health");

        editClearMH.setText("clear");
        editClearMH.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                editClearMHActionPerformed(evt);
            }
        });

        jLabel4.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel4.setText("Have you ever been refused employment based on health reason(s)?");

        jLabel5.setFont(new java.awt.Font("Dialog", 0, 12)); // NOI18N
        jLabel5.setText("If yes, Why?");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(23, 23, 23)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel2)
                    .addComponent(jLabel3)
                    .addComponent(jLabel4)
                    .addComponent(jLabel7)
                    .addComponent(jLabel8)
                    .addComponent(jLabel9)
                    .addComponent(jLabel11)
                    .addComponent(jLabel6)
                    .addComponent(jLabel10)
                    .addComponent(jLabel5))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(editJMSI, javax.swing.GroupLayout.DEFAULT_SIZE, 188, Short.MAX_VALUE)
                    .addComponent(editJMHPH)
                    .addComponent(editJMHRE, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(editJMHWI, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(editJMHMI, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(editJMHHC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(editJMHDN)
                    .addComponent(editJMHDMN)
                    .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 188, Short.MAX_VALUE)
                    .addComponent(JMHRR))
                .addGap(77, 77, 77))
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(257, 257, 257)
                        .addComponent(editSaveMH)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(editClearMH)
                        .addGap(18, 18, 18)
                        .addComponent(jButton4)
                        .addGap(10, 10, 10)
                        .addComponent(jButton6)
                        .addGap(18, 18, 18)
                        .addComponent(jButton5))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(205, 205, 205)
                        .addComponent(MHL, javax.swing.GroupLayout.PREFERRED_SIZE, 320, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(26, 26, 26)
                .addComponent(MHL, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(28, 28, 28)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(editJMSI, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(editJMHPH, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel4)
                    .addComponent(editJMHRE, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel5)
                    .addComponent(JMHRR, javax.swing.GroupLayout.PREFERRED_SIZE, 57, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel7, javax.swing.GroupLayout.PREFERRED_SIZE, 15, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(editJMHWI, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel8)
                    .addComponent(editJMHMI, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel9)
                    .addComponent(editJMHHC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(9, 9, 9)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(editJMHDN, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel10)
                    .addComponent(editJMHDMN, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel11)
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jScrollPane3, javax.swing.GroupLayout.DEFAULT_SIZE, 49, Short.MAX_VALUE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(editSaveMH)
                            .addComponent(editClearMH)
                            .addComponent(jButton4)
                            .addComponent(jButton5)
                            .addComponent(jButton6))))
                .addContainerGap())
        );

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton5ActionPerformed
        // CODE to exit windows
        System.exit(0);
    }//GEN-LAST:event_jButton5ActionPerformed

    private void editJMHHCActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editJMHHCActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_editJMHHCActionPerformed

    private void editJMHMIActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editJMHMIActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_editJMHMIActionPerformed

    private void editJMHDMNKeyTyped(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_editJMHDMNKeyTyped
        // SETTING TEXTFIELD TO TAKE ONLY NUMERICAL VALES
        //ALSO TO MAKE IT BEEP WHEN ALPHABETS ARE CLICKED
        char c30 =  evt.getKeyChar();
        //code to allow backspace and delete condition
        if (! (Character.isDigit(c30) || (c30 == KeyEvent.VK_BACKSPACE ) || c30 == KeyEvent.VK_DELETE)){
            getToolkit().beep();
            evt.consume();
        }
    }//GEN-LAST:event_editJMHDMNKeyTyped

    private void editSaveMHActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editSaveMHActionPerformed
        if (editJMSI.getText().equals("")){
            JOptionPane.showMessageDialog(rootPane, "Please enter the Staff ID of employee");

        }
        else {

            try{

                //loading the driver
                Class.forName("com.mysql.jdbc.Driver");
                System.out.print("connection worked");

                //creating connection
                Connection editnewie6 = DriverManager.getConnection("jdbc:mysql://localhost/employee_db", "root", "jesus");
                System.out.print("database connected");
                PreparedStatement flexie5 = editnewie6.prepareStatement("select * from persl_ds where S_ID = ? ");

                //getting text (STaff ID) form Jtextfield
                flexie5.setString(1,  editJMSI.getText());
                ResultSet rs = flexie5.executeQuery();
                JOptionPane.showMessageDialog(null , "checking Staff ID");

                if (rs.next()){
                    //confirming from datbase if user-given Staff Id exist
                    JOptionPane.showMessageDialog(null, "Staff ID Exists ");

                    //setting value gotten from user to value6
                  String value6 = editJMSI.getText();

                try {

                PreparedStatement editstmttz4 = editnewie6.prepareStatement("update mdh_ds  set S_ID = ?, MHPH = ?, MHRE = ?, MHRR = ? , MHWI = ?, MHMI = ?, MHHC = ?, MHDN = ?,MHDMN = ?, MHHD = ?  "
                    + "where S_ID = '"+value6+"' ");
                //for string value stmtt1.setInt(1, Integer.valueOf(PDS_ID.getText()));
                editstmttz4.setString(1, editJMSI.getText());
                editstmttz4.setString(2, editJMHPH.getText());
                editstmttz4.setString(3, (String) editJMHRE.getSelectedItem());
                editstmttz4.setString(4, editJMHRRZ.getText());
                editstmttz4.setString(5, (String) editJMHWI.getSelectedItem());
                editstmttz4.setString(6, (String) editJMHMI.getSelectedItem());
                editstmttz4.setString(7, (String) editJMHHC.getSelectedItem());
                editstmttz4.setString(8, editJMHDN.getText());
                editstmttz4.setString(9, editJMHDMN.getText());
                editstmttz4.setString(10, editJMHHD.getText());

                editstmttz4.execute();
                JOptionPane.showMessageDialog(rootPane, "employee's MEDICAL information updated!");
                editClear6();
                }catch(Exception ex){
                    ex.printStackTrace();
                }
            }
            }
            catch (ClassNotFoundException | SQLException | HeadlessException e) {
                JOptionPane.showMessageDialog(rootPane, "please ENTER an existing Staff ID" + "\n" +  " and fill all the fields again");
            }
        }

    }//GEN-LAST:event_editSaveMHActionPerformed

    private void editClearMHActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editClearMHActionPerformed
        // Method to clear all swing controls
         editClear6();
    }//GEN-LAST:event_editClearMHActionPerformed

    private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton6ActionPerformed
        // TO display homepage 
         this.dispose();
        HOMAPAGE nm = new HOMAPAGE();
        nm.show();
    }//GEN-LAST:event_jButton6ActionPerformed

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed
        // TO display update page
        this.dispose();
        EditREC nm = new EditREC();
        nm.show();
    }//GEN-LAST:event_jButton4ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(EditMH.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(EditMH.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(EditMH.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(EditMH.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new EditMH().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JScrollPane JMHRR;
    private javax.swing.JLabel MHL;
    private javax.swing.JButton editClearMH;
    private javax.swing.JTextField editJMHDMN;
    private javax.swing.JTextField editJMHDN;
    private javax.swing.JComboBox editJMHHC;
    private javax.swing.JTextArea editJMHHD;
    private javax.swing.JComboBox editJMHMI;
    private javax.swing.JTextField editJMHPH;
    private javax.swing.JComboBox editJMHRE;
    private javax.swing.JTextArea editJMHRRZ;
    private javax.swing.JComboBox editJMHWI;
    private javax.swing.JTextField editJMSI;
    private javax.swing.JButton editSaveMH;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButton5;
    private javax.swing.JButton jButton6;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JScrollPane jScrollPane3;
    // End of variables declaration//GEN-END:variables
}
